System.register(["./utilities-4ab35663.js"],function(e,t){"use strict";var a,c,r,n,s,i,o,u,d;return{setters:[function(t){a=t.g,c=t.h,r=t.k,n=t.a,s=t.j,i=t.b,o=t.c,u=t.d,d=t.e,t.f}],execute:function(){var t=function(t){function n(){i(this,n);var t=d(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e=document.createElement("div");return e.innerHTML="\n  <style>\n    :host {\n      display: block;\n\n      --x-forecast-item-float: inherit;\n      --x-forecast-item-width: inherit;\n      --x-forecast-item-margin: inherit;\n      --x-forecast-date-container-grid-template-columns: var(--x-forecast-date-container-grid-template-columns);\n    }\n\n    x-forecast-item {\n      float: var(--x-forecast-item-float);\n      margin: var(--x-forecast-item-margin);\n      width: var(--x-forecast-item-width);\n    }\n\n    [data-x-forecast-date-container] {\n      display: grid;\n      grid-template-columns: var(--x-forecast-date-container-grid-template-columns);\n    }\n  </style>\n\n  <div data-x-forecast>\n    <div data-x-forecast-date-container>\n  </div>\n",t.attachShadow({mode:"open"}).appendChild(e),t}return u(n,t),o(n,[{key:"connectedCallback",value:function(){var e=this;this.refresh().then(function(t){e.render(t,e.days),e.currentForecast=t})}},{key:"attributeChangedCallback",value:function(t,e,n){e!==n&&null!==this.days&&("days"!==t&&"scale"!==t||this.render(this.currentForecast,this.days))}},{key:"_buildDateContainer",value:function(t,e){var i=this,s=document.createElement("div");if(s.setAttribute("data-x-forecast-date-container",""),t&&!r(t)){var o=c(new Date).Y("-").m("-").d("").getResults();t.length>e&&(t.length=e),t.forEach(function(t){var e=t.dt,n=t.temp,a=(t.pressure,t.humidity,t.weather),r=(t.speed,t.deg,t.clouds,t.rain,document.createElement("x-forecast-item"));r.setAttribute("day",i._convertForecast({scale:i.scale,timeOfDayTemp:n.day})),r.setAttribute("description",a[0].description),r.setAttribute("forecast-date",i._getDayOfWeek({dt:e,today:o})),r.setAttribute("icon","https://openweathermap.org/themes/openweathermap/assets/vendor/owm/img/widgets/"+a[0].icon+".png"),r.setAttribute("night",i._convertForecast({scale:i.scale,timeOfDayTemp:n.night})),r.setAttribute("scale",i.scale),s.appendChild(r)})}return s}},{key:"_convertForecast",value:function(t){var e=t.scale,n=t.timeOfDayTemp;return""+Number.parseFloat("F"===e?a(n,"cToF"):n).toFixed(2)}},{key:"_getDayOfWeek",value:function(t){var e=t.dt,n=t.today,a=s(e),r=c(a).Y("-").m("-").d().getResults(),i=c(a).m("/").d().getResults();return r===n?"Today ("+i+"):":c(a).date.toLocaleString("en-US",{weekday:"long"})+" ("+i+"):"}},{key:"_getForecast",value:function(t){var e=t.appid,n=t.host,a=t.location;if(e&&n&&a)return this._serviceHandler({appid:e,host:n,location:a}).then(function(t){t.city,t.cod,t.message,t.cnt;return t.list})}},{key:"_serviceHandler",value:function(t){var e=t.appid,n=t.host,a=t.location;return fetch("https://"+n+"/data/2.5/forecast/daily?q="+a+"&mode=json&units=metric&cnt=14&appid="+e,{method:"GET"}).then(function(t){if(t.ok)return t.json()})}},{key:"refresh",value:function(){var t={appid:this.parentElement.getAttribute("appid"),host:this.parentElement.getAttribute("host"),location:this.parentElement.getAttribute("location")};return this._getForecast(t)}},{key:"render",value:function(t,e){var n=this.shadowRoot.querySelector("[data-x-forecast]"),a=this.shadowRoot.querySelector("[data-x-forecast] > [data-x-forecast-date-container]");n.replaceChild(this._buildDateContainer(t,e),a)}},{key:"appid",get:function(){return this.getAttribute("appid")},set:function(t){this.setAttribute("appid",t)}},{key:"days",get:function(){return this.getAttribute("days")},set:function(t){this.setAttribute("days",t)}},{key:"host",get:function(){return this.getAttribute("host")},set:function(t){this.setAttribute("host",t)}},{key:"location",get:function(){return this.getAttribute("location")},set:function(t){this.setAttribute("location",t)}},{key:"scale",get:function(){return this.getAttribute("scale")},set:function(t){this.setAttribute("scale",t)}}],[{key:"observedAttributes",get:function(){return["days","scale"]}}]),n}(HTMLElement);e("load",function(){return n({customElements:customElements,tagName:"x-forecast",element:t})});e("default",t)}}});
