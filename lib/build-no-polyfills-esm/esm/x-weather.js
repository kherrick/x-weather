import{a as loadComponent,b as classCallCheck,c as createClass,d as inherits,e as possibleConstructorReturn,f as toConsumableArray}from"./utilities-d21591dc.js";function _CustomElement(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(_CustomElement.prototype,HTMLElement.prototype),Object.setPrototypeOf(_CustomElement,HTMLElement);var template='\n  <style>\n    :host {\n      display: block;\n\n      --x-weather-location-margin: inherit;\n    }\n\n    div[data-x-weather] #location {\n      border: 0;\n      display: block;\n      font-size: 1.5rem;\n      font-style: italic;\n      margin: auto;\n    }\n  </style>\n\n  <div data-x-weather>\n    <div><input id="location"></input></div>\n\n    <slot></slot>\n  </div>\n',XWeather=function(t){function e(){classCallCheck(this,e);var t=possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),o=document.createElement("div");return o.innerHTML=template,t.attachShadow({mode:"open"}).appendChild(o),t}return inherits(e,_CustomElement),createClass(e,[{key:"connectedCallback",value:function(){var t=this;this._upgradeProperty("appid"),this._upgradeProperty("host"),this._upgradeProperty("location"),this.xCurrent=this.querySelector("x-current"),this.xForecast=this.querySelector("x-forecast"),this._renderLocation(this.location);var e=this.shadowRoot.querySelector("#location");e.addEventListener("change",function(){t.location=e.value,t.xCurrent.refresh().then(function(e){t.xCurrent.render(e),t.xCurrent.currentWeather=e}),t.xForecast.refresh().then(function(e){t.xForecast.render(e),t.xForecast.currentForecast=e})})}},{key:"attributeChangedCallback",value:function(t,e,o){(e!==o&&"appid"===t||"host"===t||"location"===t)&&("location"===t&&this._renderLocation(this.location),this.xCurrent&&this.xCurrent.setAttribute(t,o),this.xForecast&&this.xForecast.setAttribute(t,o))}},{key:"_renderLocation",value:function(t){var e=this.shadowRoot.querySelector("#location");e.value=t;var o=window.getComputedStyle(this.shadowRoot.querySelector("div[data-x-weather] #location")).fontSize.slice(0,-2);e.style.width=e.value.length*Number(o)/2+"px"}},{key:"_upgradeProperty",value:function(t){if(this.hasOwnProperty(t)){var e=this[t];delete this[t],this[t]=e}}},{key:"appid",get:function(){return this.getAttribute("appid")},set:function(t){this.setAttribute("appid",t)}},{key:"host",get:function(){return this.getAttribute("host")},set:function(t){this.setAttribute("host",t)}},{key:"location",get:function(){return this.getAttribute("location")},set:function(t){this.setAttribute("location",t)}}],[{key:"observedAttributes",get:function(){return["appid","host","location"]}}]),e}(),load=function(){return loadComponent({customElements:customElements,tagName:"x-weather",element:XWeather})};export default XWeather;export{load};
