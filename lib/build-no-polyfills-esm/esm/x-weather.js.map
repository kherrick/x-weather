{"version":3,"file":"x-weather.js","sources":["../../src/components/x-weather.js"],"sourcesContent":["import { loadComponent } from '../utilities.js'\n\nconst template = `\n  <style>\n    :host {\n      display: block;\n\n      --x-weather-location-margin: inherit;\n    }\n\n    div[data-x-weather] #location {\n      border: 0;\n      font-style: italic;\n      margin: var(--x-weather-location-margin);\n      padding: 0 2.5% 0 0;\n      width: 95%;\n    }\n  </style>\n\n  <div data-x-weather>\n    <div><input id=\"location\"></input></div>\n\n    <slot></slot>\n  </div>\n`\n\nconst XWeather = class extends HTMLElement {\n  constructor() {\n    super()\n\n    const container = document.createElement('div')\n    container.innerHTML = template\n\n    this.attachShadow({ mode: 'open' }).appendChild(container)\n  }\n\n  connectedCallback() {\n    this._upgradeProperty('appid')\n    this._upgradeProperty('host')\n    this._upgradeProperty('location')\n\n    this.xCurrent = this.querySelector('x-current')\n    this.xForecast = this.querySelector('x-forecast')\n\n    this._renderLocation(this.location)\n\n    const location = this.shadowRoot.querySelector('#location')\n\n    location.addEventListener('change', () => {\n      this.location = location.value\n\n      this.xCurrent.refresh().then(currentWeather => {\n        this.xCurrent.render(currentWeather)\n        // set this as a class property to be used later\n        this.xCurrent.currentWeather = currentWeather\n      })\n\n      this.xForecast.refresh().then(currentForecast => {\n        this.xForecast.render(currentForecast)\n        // set this as a class property to be used later\n        this.xForecast.currentForecast = currentForecast\n      })\n    })\n  }\n\n  attributeChangedCallback(attrName, oldVal, newVal) {\n    if (oldVal !== newVal && attrName === 'appid' || attrName === 'host' || attrName === 'location') {\n      if (attrName === 'location') {\n        this._renderLocation(this.location)\n      }\n\n      if (this.xCurrent) {\n        this.xCurrent.setAttribute(attrName, newVal)\n      }\n\n      if (this.xForecast) {\n        this.xForecast.setAttribute(attrName, newVal)\n      }\n    }\n  }\n\n  static get observedAttributes() {\n    return [ 'appid', 'host', 'location' ]\n  }\n\n  get appid() {\n    return this.getAttribute('appid')\n  }\n\n  set appid(appid) {\n    this.setAttribute('appid', appid)\n  }\n\n  get host() {\n    return this.getAttribute('host')\n  }\n\n  set host(host) {\n    this.setAttribute('host', host)\n  }\n\n  get location() {\n    return this.getAttribute('location')\n  }\n\n  set location(location) {\n    this.setAttribute('location', location)\n  }\n\n  _renderLocation(location) {\n    this.shadowRoot.querySelector('#location').value = location\n  }\n\n  _upgradeProperty(prop) {\n    if (this.hasOwnProperty(prop)) {\n      let value = this[prop]\n\n      delete this[prop]\n\n      this[prop] = value\n    }\n  }\n}\n\nexport const load = () => loadComponent({\n  customElements: customElements,\n  tagName: 'x-weather',\n  element: XWeather\n})\n\nexport default XWeather\n"],"names":["template","XWeather","container","document","createElement","innerHTML","attachShadow","mode","appendChild","_upgradeProperty","xCurrent","querySelector","xForecast","_renderLocation","location","shadowRoot","addEventListener","value","refresh","then","render","currentWeather","currentForecast","attrName","oldVal","newVal","setAttribute","prop","hasOwnProperty","getAttribute","appid","host","load","loadComponent","customElements"],"mappings":";;;;;;;AAAA;AAEA,IAAMA,kaAAN;;AAwBA,IAAMC;;;sBACU;;;;;QAGNC,YAAYC,SAASC,aAAT,CAAuB,KAAvB,CAAlB;cACUC,SAAV,GAAsBL,QAAtB;;UAEKM,YAAL,CAAkB,EAAEC,MAAM,MAAR,EAAlB,EAAoCC,WAApC,CAAgDN,SAAhD;;;;;;wCAGkB;;;WACbO,gBAAL,CAAsB,OAAtB;WACKA,gBAAL,CAAsB,MAAtB;WACKA,gBAAL,CAAsB,UAAtB;;WAEKC,QAAL,GAAgB,KAAKC,aAAL,CAAmB,WAAnB,CAAhB;WACKC,SAAL,GAAiB,KAAKD,aAAL,CAAmB,YAAnB,CAAjB;;WAEKE,eAAL,CAAqB,KAAKC,QAA1B;;UAEMA,WAAW,KAAKC,UAAL,CAAgBJ,aAAhB,CAA8B,WAA9B,CAAjB;;eAESK,gBAAT,CAA0B,QAA1B,EAAoC,YAAM;eACnCF,QAAL,GAAgBA,SAASG,KAAzB;;eAEKP,QAAL,CAAcQ,OAAd,GAAwBC,IAAxB,CAA6B,0BAAkB;iBACxCT,QAAL,CAAcU,MAAd,CAAqBC,cAArB;;iBAEKX,QAAL,CAAcW,cAAd,GAA+BA,cAA/B;SAHF;;eAMKT,SAAL,CAAeM,OAAf,GAAyBC,IAAzB,CAA8B,2BAAmB;iBAC1CP,SAAL,CAAeQ,MAAf,CAAsBE,eAAtB;;iBAEKV,SAAL,CAAeU,eAAf,GAAiCA,eAAjC;SAHF;OATF;;;;6CAiBuBC,QAvCrB,EAuC+BC,MAvC/B,EAuCuCC,MAvCvC,EAuC+C;UAC7CD,WAAWC,MAAX,IAAqBF,aAAa,OAAlC,IAA6CA,aAAa,MAA1D,IAAoEA,aAAa,UAArF,EAAiG;YAC3FA,aAAa,UAAjB,EAA6B;eACtBV,eAAL,CAAqB,KAAKC,QAA1B;;;YAGE,KAAKJ,QAAT,EAAmB;eACZA,QAAL,CAAcgB,YAAd,CAA2BH,QAA3B,EAAqCE,MAArC;;;YAGE,KAAKb,SAAT,EAAoB;eACbA,SAAL,CAAec,YAAf,CAA4BH,QAA5B,EAAsCE,MAAtC;;;;;;oCAiCUX,QAnFZ,EAmFsB;WACnBC,UAAL,CAAgBJ,aAAhB,CAA8B,WAA9B,EAA2CM,KAA3C,GAAmDH,QAAnD;;;;qCAGea,IAvFb,EAuFmB;UACjB,KAAKC,cAAL,CAAoBD,IAApB,CAAJ,EAA+B;YACzBV,QAAQ,KAAKU,IAAL,CAAZ;;eAEO,KAAKA,IAAL,CAAP;;aAEKA,IAAL,IAAaV,KAAb;;;;;wBAlCQ;aACH,KAAKY,YAAL,CAAkB,OAAlB,CAAP;KA5DE;sBA+DMC,KA/DN,EA+Da;WACVJ,YAAL,CAAkB,OAAlB,EAA2BI,KAA3B;;;;wBAGS;aACF,KAAKD,YAAL,CAAkB,MAAlB,CAAP;KApEE;sBAuEKE,IAvEL,EAuEW;WACRL,YAAL,CAAkB,MAAlB,EAA0BK,IAA1B;;;;wBAGa;aACN,KAAKF,YAAL,CAAkB,UAAlB,CAAP;KA5EE;sBA+ESf,QA/ET,EA+EmB;WAChBY,YAAL,CAAkB,UAAlB,EAA8BZ,QAA9B;;;;wBAzB8B;aACvB,CAAE,OAAF,EAAW,MAAX,EAAmB,UAAnB,CAAP;;;;iBAxDJ;;AAkGA,IAAakB,OAAO,SAAPA,IAAO;SAAMC,cAAc;oBACtBC,cADsB;aAE7B,WAF6B;aAG7BjC;GAHe,CAAN;CAAb;;;;;"}