System.register(["./utilities-efc14eb9.js"],function(n,t){"use strict";var y,g,a,r,b,i,o,s,c;return{setters:[function(t){y=t.g,g=t.h,a=t.j,r=t.a,b=t.i,i=t.b,o=t.c,s=t.d,c=t.e,t.f}],execute:function(){function e(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(e.prototype,HTMLElement.prototype),Object.setPrototypeOf(e,HTMLElement);var t=function(t){function n(){i(this,n);var t=c(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e=document.createElement("div");return e.innerHTML="\n  <style>\n    :host {\n      display: block;\n    }\n\n    div[data-x-forecast] h3 {\n      padding-left: 0.5rem;\n    }\n\n    div[data-x-forecast] ul {\n      list-style-type: none;\n      padding: 0 0 1rem 1.5rem;\n    }\n\n    div[data-x-forecast] ul > li {\n      padding: 0.5rem 0 0 0;\n    }\n  </style>\n\n  <div data-x-forecast>\n    <h3>Forecast</h3>\n\n    <div data-x-forecast-date-container>\n  <div/>\n",t.attachShadow({mode:"open"}).appendChild(e),t}return s(n,e),o(n,[{key:"connectedCallback",value:function(){var e=this;this.refresh().then(function(t){e.render(t),e.currentForecast=t})}},{key:"attributeChangedCallback",value:function(t,e,n){e!==n&&"scale"===t&&this.render(this.currentForecast)}},{key:"_buildDateContainer",value:function(t){var f=this,m=document.createElement("div");if(m.setAttribute("data-x-forecast-date-container",""),t&&!a(t)){var v=g(new Date).Y("-").m("-").d("").getResults();t.forEach(function(t){var e=t.dt,n=t.temp,a=(t.pressure,t.humidity,t.weather,t.speed,t.deg,t.clouds,t.rain,document.createElement("ul")),r=document.createElement("u"),i=b(e),o=g(i).Y("-").m("-").d().getResults(),s="F"===f.scale?y(n.day,"cToF"):n.day,c="F"===f.scale?y(n.night,"cToF"):n.night;if(o===v)r.textContent="Today:";else{var u=g(i).date.toLocaleString("en-US",{weekday:"long"}),d=g(i).m("/").d().getResults();r.textContent=u+" ("+d+"):"}var l=document.createElement("li");l.appendChild(r),a.appendChild(l);var h=document.createElement("li");h.textContent="Day: "+Number.parseFloat(s).toFixed(2)+"°"+f.scale,a.appendChild(h);var p=document.createElement("li");p.textContent="Night: "+Number.parseFloat(c).toFixed(2)+"°"+f.scale,a.appendChild(p),m.appendChild(a)})}return m}},{key:"_getForecast",value:function(t){var e=t.appid,n=t.host,a=t.location;if(e&&n&&a)return this._serviceHandler({appid:e,host:n,location:a}).then(function(t){t.city,t.cod,t.message,t.cnt;return t.list})}},{key:"_serviceHandler",value:function(t){var e=t.appid,n=t.host,a=t.location;return fetch("https://"+n+"/data/2.5/forecast/daily?q="+a+"&mode=json&units=metric&cnt=14&appid="+e,{method:"GET"}).then(function(t){if(t.ok)return t.json()})}},{key:"refresh",value:function(){var t={appid:this.parentElement.getAttribute("appid"),host:this.parentElement.getAttribute("host"),location:this.parentElement.getAttribute("location")};return this._getForecast(t)}},{key:"render",value:function(t){var e=this.shadowRoot.querySelector("[data-x-forecast]"),n=this.shadowRoot.querySelector("[data-x-forecast] > [data-x-forecast-date-container]");e.replaceChild(this._buildDateContainer(t),n)}},{key:"appid",get:function(){return this.getAttribute("appid")},set:function(t){this.setAttribute("appid",t)}},{key:"host",get:function(){return this.getAttribute("host")},set:function(t){this.setAttribute("host",t)}},{key:"location",get:function(){return this.getAttribute("location")},set:function(t){this.setAttribute("location",t)}},{key:"scale",get:function(){return this.getAttribute("scale")},set:function(t){this.setAttribute("scale",t)}}],[{key:"observedAttributes",get:function(){return["scale"]}}]),n}();n("load",function(){return r({customElements:customElements,tagName:"x-forecast",element:t})});n("default",t)}}});
