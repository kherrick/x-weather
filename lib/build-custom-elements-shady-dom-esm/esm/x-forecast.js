import{g as dateTime,j as isObjectEmpty,a as loadComponent,i as unixEpochToDate,b as classCallCheck,c as createClass,d as inherits,e as possibleConstructorReturn,f as toConsumableArray}from"./utilities-9c055f86.js";function _CustomElement(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(_CustomElement.prototype,HTMLElement.prototype),Object.setPrototypeOf(_CustomElement,HTMLElement);var template="\n  <style>\n    :host {\n      display: block;\n    }\n\n    div[data-x-forecast] h3 {\n      padding-left: 0.5rem;\n    }\n\n    div[data-x-forecast] ul {\n      list-style-type: none;\n      padding: 0 0 1rem 1.5rem;\n    }\n\n    div[data-x-forecast] ul > li {\n      padding: 0.5rem 0 0 0;\n    }\n  </style>\n\n  <div data-x-forecast>\n    <h3>Forecast</h3>\n  <div/>\n",XForecast=function(t){function e(){classCallCheck(this,e);var t=possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n=document.createElement("div");return n.innerHTML=template,t.attachShadow({mode:"open"}).appendChild(n),t}return inherits(e,_CustomElement),createClass(e,[{key:"render",value:function(){var t=dateTime(new Date).Y("-").m("-").d("").getResults(),e=document.createElement("div");this.forecast&&!isObjectEmpty(this.forecast)&&this.forecast.forEach(function(n){var a=n.dt,o=n.temp,s=(n.pressure,n.humidity,n.weather,n.speed,n.deg,n.clouds,n.rain,document.createElement("ul")),r=document.createElement("u"),i=unixEpochToDate(a);if(dateTime(i).Y("-").m("-").d().getResults()===t)r.textContent="Today:";else{var c=dateTime(i).date.toLocaleString("en-US",{weekday:"long"}),l=dateTime(i).m("/").d().getResults();r.textContent=c+" ("+l+"):"}var d=document.createElement("li");d.appendChild(r),s.appendChild(d);var m=document.createElement("li");m.textContent="Day: "+Number.parseFloat(o.day).toFixed(2)+"°C",s.appendChild(m);var u=document.createElement("li");u.textContent="Night: "+Number.parseFloat(o.night).toFixed(2)+"°C",s.appendChild(u),e.appendChild(s)}),this.shadowRoot.querySelector("[data-x-forecast]").appendChild(e)}},{key:"connectedCallback",value:function(){var t=this,e=this.parentElement.getAttribute("appid"),n=this.parentElement.getAttribute("host"),a=this.parentElement.getAttribute("location");e&&n&&a&&this.getForecast({appid:e,host:n,location:a}).then(function(e){e.city,e.cod,e.message,e.cnt;var n=e.list;t.forecast=n,t.render()})}},{key:"getForecast",value:function(t){var e=t.appid,n=t.host,a=t.location;return fetch("https://"+n+"/data/2.5/forecast/daily?q="+a+"&mode=json&units=metric&cnt=14&appid="+e,{method:"GET"}).then(function(t){if(t.ok)return t.json()})}}]),e}(),load=function(){return loadComponent({customElements:customElements,tagName:"x-forecast",element:XForecast})};export default XForecast;export{load};
