import{g as dateTime,a as loadComponent,h as setTextContent,i as unixEpochToDate,b as classCallCheck,c as createClass,d as inherits,e as possibleConstructorReturn,f as toConsumableArray}from"./utilities-9c055f86.js";function _CustomElement(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(_CustomElement.prototype,HTMLElement.prototype),Object.setPrototypeOf(_CustomElement,HTMLElement);var template='\n  <style>\n    :host {\n      display: block;\n    }\n\n    div[data-x-current] h3 {\n      padding-left: 0.5rem;\n    }\n\n    div[data-x-current] ul {\n      list-style-type: none;\n      padding: 0 0 1rem 1.5rem;\n    }\n\n    div[data-x-current] ul > li {\n      padding: 0.5rem 0 0 0;\n    }\n\n    div[data-x-current] #time {\n      display: none;\n    }\n  </style>\n\n  <div data-x-current>\n    <h3>Currently</h3>\n    <ul>\n      <li id="time"></li>\n      <li><img alt="" id="icon"></img></li>\n      <li><span id="temperature"></span>Â°C</li>\n    </ul>\n  </div>\n',XCurrent=function(t){function e(){classCallCheck(this,e);var t=possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));t.mocked=!0;var n=document.createElement("div");return n.innerHTML=template,t.attachShadow({mode:"open"}).appendChild(n),t}return inherits(e,_CustomElement),createClass(e,[{key:"connectedCallback",value:function(){var t=this,e=this.parentElement.getAttribute("appid"),n=this.parentElement.getAttribute("host"),o=this.parentElement.getAttribute("location");e&&n&&o&&this.getCurrentWeather({appid:e,host:n,location:o}).then(function(e){e.coord;var n=e.weather,o=(e.base,e.main),r=(e.visibility,e.wind,e.clouds,e.dt),i=(e.sys,e.id,e.name,e.cod,o.temp-273);t.temperature=Number.parseFloat(i).toFixed(2),t.iconSrc="http://openweathermap.org/img/w/"+n[0].icon+".png",t.iconAlt=n[0].description,t.timestamp=r})}},{key:"getCurrentWeather",value:function(t){var e=t.appid,n=t.host,o=t.location;return fetch("https://"+n+"/data/2.5/weather?q="+o+"&appid="+e,{method:"GET"}).then(function(t){if(t.ok)return t.json()})}},{key:"timestamp",set:function(t){setTextContent(this.shadowRoot,"time",dateTime(unixEpochToDate(t)).H(":").M(":").S().getResults())}},{key:"iconAlt",set:function(t){this.shadowRoot.querySelector("#icon").setAttribute("alt",t)}},{key:"iconSrc",set:function(t){this.shadowRoot.querySelector("#icon").src=t}},{key:"temperature",set:function(t){this.setAttribute("temperature",t),setTextContent(this.shadowRoot,"temperature",t)}}]),e}(),load=function(){return loadComponent({customElements:customElements,tagName:"x-current",element:XCurrent})};export default XCurrent;export{load};
