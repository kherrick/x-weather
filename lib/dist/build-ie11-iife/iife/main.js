var Main=function(){"use strict";var i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),r=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},t=function(t){var e=t.customElements,n=t.tagName,i=t.element,r=function(t){var e=t.customElements,n=t.tagName,i=t.element;e.define(n,i)};window.customElements?r({customElements:e,tagName:n,element:i}):document.addEventListener("WebComponentsReady",function(){r({customElements:e,tagName:n,element:i})})},a=function(t,e,n){t.querySelector("#"+e).textContent=n},m=function(t){return new Date(1e3*t)},p=function(t){return{date:t,results:"",getResults:function(){return this.results},getTimeStamp:function(){return this.date.getTime()},Y:function(t){return this.results+=this.date.getFullYear(),this.sep(t)&&(this.results+=t),this},m:function(t){return this.results+=this.pad(this.date.getMonth()+1),this.sep(t)&&(this.results+=t),this},d:function(t){return this.results+=this.pad(this.date.getDate()),this.sep(t)&&(this.results+=t),this},H:function(t){return this.results+=this.pad(this.date.getHours()),this.sep(t)&&(this.results+=t),this},M:function(t){return this.results+=this.pad(this.date.getMinutes()),this.sep(t)&&(this.results+=t),this},S:function(t){return this.results+=this.pad(this.date.getSeconds()),this.sep(t)&&(this.results+=t),this},pad:function(t){return t<10?"0"+t:t},sep:function(t){return!!t}}},n=function(t){function n(){i(this,n);var t=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));t.mocked=!0;var e=document.createElement("div");return e.innerHTML='\n  <style>\n    :host {\n      display: block;\n    }\n\n    div[data-x-current] h3 {\n      padding-left: 0.5rem;\n    }\n\n    div[data-x-current] ul {\n      list-style-type: none;\n      padding: 0 0 1rem 1.5rem;\n    }\n\n    div[data-x-current] ul > li {\n      padding: 0.5rem 0 0 0;\n    }\n\n    div[data-x-current] #time {\n      display: none;\n    }\n  </style>\n\n  <div data-x-current>\n    <h3>Currently</h3>\n    <ul>\n      <li id="time"></li>\n      <li><img alt="" id="icon"></img></li>\n      <li><span id="temperature"></span>°C</li>\n    </ul>\n  </div>\n',t.attachShadow({mode:"open"}).appendChild(e),t}return r(n,t),e(n,[{key:"connectedCallback",value:function(){var o=this,t=this.parentElement.getAttribute("appid"),e=this.parentElement.getAttribute("host"),n=this.parentElement.getAttribute("location");t&&e&&n&&this.getCurrentWeather({appid:t,host:e,location:n}).then(function(t){t.coord;var e=t.weather,n=(t.base,t.main),i=(t.visibility,t.wind,t.clouds,t.dt),r=(t.sys,t.id,t.name,t.cod,n.temp-273);o.temperature=Number.parseFloat(r).toFixed(2),o.iconSrc="http://openweathermap.org/img/w/"+e[0].icon+".png",o.iconAlt=e[0].description,o.timestamp=i})}},{key:"getCurrentWeather",value:function(t){var e=t.appid,n=t.host,i=t.location;return fetch("https://"+n+"/data/2.5/weather?q="+i+"&appid="+e,{method:"GET"}).then(function(t){if(t.ok)return t.json()})}},{key:"timestamp",set:function(t){a(this.shadowRoot,"time",p(m(t)).H(":").M(":").S().getResults())}},{key:"iconAlt",set:function(t){this.shadowRoot.querySelector("#icon").setAttribute("alt",t)}},{key:"iconSrc",set:function(t){this.shadowRoot.querySelector("#icon").src=t}},{key:"temperature",set:function(t){this.setAttribute("temperature",t),a(this.shadowRoot,"temperature",t)}}]),n}(HTMLElement),s=function(t){function n(){i(this,n);var t=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e=document.createElement("div");return e.innerHTML="\n  <style>\n    :host {\n      display: block;\n    }\n\n    div[data-x-forecast] h3 {\n      padding-left: 0.5rem;\n    }\n\n    div[data-x-forecast] ul {\n      list-style-type: none;\n      padding: 0 0 1rem 1.5rem;\n    }\n\n    div[data-x-forecast] ul > li {\n      padding: 0.5rem 0 0 0;\n    }\n  </style>\n\n  <div data-x-forecast>\n    <h3>Forecast</h3>\n  <div/>\n",t.attachShadow({mode:"open"}).appendChild(e),t}return r(n,t),e(n,[{key:"render",value:function(){var t,d=p(new Date).Y("-").m("-").d("").getResults(),h=document.createElement("div");this.forecast&&(t=this.forecast,0!==Object.keys(t).length||t.constructor!==Object)&&this.forecast.forEach(function(t){var e=t.dt,n=t.temp,i=(t.pressure,t.humidity,t.weather,t.speed,t.deg,t.clouds,t.rain,document.createElement("ul")),r=document.createElement("u"),o=m(e);if(p(o).Y("-").m("-").d().getResults()===d)r.textContent="Today:";else{var a=p(o).date.toLocaleString("en-US",{weekday:"long"}),s=p(o).m("/").d().getResults();r.textContent=a+" ("+s+"):"}var u=document.createElement("li");u.appendChild(r),i.appendChild(u);var c=document.createElement("li");c.textContent="Day: "+Number.parseFloat(n.day).toFixed(2)+"°C",i.appendChild(c);var l=document.createElement("li");l.textContent="Night: "+Number.parseFloat(n.night).toFixed(2)+"°C",i.appendChild(l),h.appendChild(i)}),this.shadowRoot.querySelector("[data-x-forecast]").appendChild(h)}},{key:"connectedCallback",value:function(){var n=this,t=this.parentElement.getAttribute("appid"),e=this.parentElement.getAttribute("host"),i=this.parentElement.getAttribute("location");t&&e&&i&&this.getForecast({appid:t,host:e,location:i}).then(function(t){t.city,t.cod,t.message,t.cnt;var e=t.list;n.forecast=e,n.render()})}},{key:"getForecast",value:function(t){var e=t.appid,n=t.host,i=t.location;return fetch("https://"+n+"/data/2.5/forecast/daily?q="+i+"&mode=json&units=metric&cnt=14&appid="+e,{method:"GET"}).then(function(t){if(t.ok)return t.json()})}}]),n}(HTMLElement),u=function(t){function n(){i(this,n);var t=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e=document.createElement("div");return e.innerHTML='\n  <style>\n    :host {\n      display: block;\n    }\n\n    div[data-x-weather] #location {\n      margin: 0 0 1rem 1rem;\n    }\n  </style>\n\n  <div data-x-weather>\n    <em><small id="location"></small></em>\n\n    <slot></slot>\n  </div>\n',t.attachShadow({mode:"open"}).appendChild(e),t}return r(n,t),e(n,[{key:"connectedCallback",value:function(){a(this.shadowRoot,"location",this.location)}},{key:"appid",get:function(){return this.getAttribute("appid")}},{key:"host",get:function(){return this.getAttribute("host")}},{key:"location",get:function(){return this.getAttribute("location")}}],[{key:"observedAttributes",get:function(){return["location"]}}]),n}(HTMLElement);return t({customElements:customElements,tagName:"x-current",element:n}),t({customElements:customElements,tagName:"x-forecast",element:s}),t({customElements:customElements,tagName:"x-weather",element:u}),{XCurrent:n,XForecast:s,XWeather:u}}();
